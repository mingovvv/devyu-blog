<div th:fragment = "summernote-editor">
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.15/dist/summernote-bs4.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.15/dist/summernote-bs4.min.js"></script>
<script type="text/javascript">
$('#summernote').summernote({
	minHeight: 500,             // set minimum height of editor
	maxHeight: null,             // set maximum height of editor
	lang: 'ko-KR',
	
	callbacks: {
        onImageUpload: function(files) {
            for(let i=0; i < files.length; i++) {
            	uploadImage(files[i]);
            }
        }
    }
});

function uploadImage(file) {
    var data = new FormData();
    data.append('file', file, file.name);

    $.ajax({
        method: 'POST',
        url: '/blog/imageUpload',
        contentType: false,
        cache: false,
        processData: false,
        data: data,
        success: function (img) {
            $('#summernote').summernote('insertImage', img);
        },
        error: function (jqXHR, textStatus, errorThrown) {
            console.error(textStatus + " " + errorThrown);
        }
    });
};
</script>
</div>