<!DOCTYPE html>
<html 	lang="ko" 
			xmlns:th="http://www.thymeleaf.org"
			xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
			layout:decorate="~{layout/default}">
<head>
    <title>블로그</title>
</head>

<div layout:fragment="content">
<section class="site-section pt-5">
      <div class="container">
        <div class="row mb-4">
          <div class="col-md-6">
            <span class="mb-4" th:if="${blogFlag.flag eq 'default'}" th:text="${'전체글 '}"></span>
           	<span th:if="${blogFlag.flag eq 'default'}" th:text="${blogFlag.count} + ' 건'" style="color: #04beb8"></span>
           	
            <span class="mb-4" th:if="${blogFlag.flag eq 'searchTag'}" th:text="${'#'+blogFlag.tagName}"></span>
           	<span th:if="${blogFlag.flag eq 'searchTag'}" th:text="${blogFlag.count} + ' 건'" style="color: #04beb8"></span>
           	
            <span class="mb-4" th:if="${blogFlag.flag eq 'searchText'}" th:text="${'search : '+blogFlag.keyword}"></span>
           	<span th:if="${blogFlag.flag eq 'searchText'}" th:text="${blogFlag.count} + ' 건'" style="color: #04beb8"></span>
          </div> 
        </div>
        <div class="row blog-entries">
          <div class="col-md-12 col-lg-8 main-content">
            <div class="row mb-5 mt-5">
              <div class="col-md-12">
              
				<!-- START post -->
                <div class="post-entry-horzontal" th:each="blog : ${blogList}">
                  <a th:href="@{/blog/{id} (id=${blog.id})}" th:with="contents = ${blog.contents}">
                    
                    	<th:block th:with="startMatchingIndex = ${#strings.indexOf(contents, 'src=')} + 5,
                    								  frontCutting = ${#strings.substring(contents, startMatchingIndex)},
                    								  endMatchingIndex = ${#strings.indexOf(frontCutting, '&quot')},
                    								  endCutting = ${#strings.substring(frontCutting, 0, endMatchingIndex)}"
                    					th:if="${#strings.contains(contents, 'src=')}">
                    		<div class="image element-animate" data-animate-effect="fadeIn">
		                    	<img	th:src="${endCutting}"
		                  					style="width: 100%; height: -webkit-fill-available;" />
	                  		</div>
                    	</th:block>	
                    	
                    	<th:block th:unless="${#strings.contains(contents, 'src=')}">
                    	</th:block>
                    		
<!--                     <div class="image element-animate" data-animate-effect="fadeIn">
                    	<img th:src="${blog.contents}" style="width: 100%; height: -webkit-fill-available;">
                    </div> -->
                    <!-- <div class="image element-animate" data-animate-effect="fadeIn" style="background-image: url(images/img_10.jpg);"></div> -->
                    <span class="text" style="border: 1px solid #e6e6e6">
                      <div class="post-meta">
                        <span class="mr-2" th:text="${blog.getFormattedCreatedDate()}">March 15, 2018 </span>
                        <span class="mr-2">blogging</span> 
                        <span class="ml-2 fa fa-eye"><span class="ml-1" th:text="${blog.countOfViews}"></span></span>
                        <span class="ml-2 fa fa-comments"><span class="ml-1" th:text="${blog.countOfComment}"></span></span>
                        <span class="ml-2 fa fa-thumbs-o-up"><span class="ml-1" th:text="${blog.countOfThumbsUp}"></span></span>
                      </div>
	                      <h2 class="word" th:if="${blog.title}" th:text="${blog.title}"></h2>
                    </span>
                  </a>
                </div>
                <!-- END post -->
                
              </div>
            </div>

            <!-- <div class="row mt-5">
              <div class="col-md-12 text-center">
                <nav aria-label="Page navigation" class="text-center">
                  <ul class="pagination">
                    <li class="page-item  active"><a class="page-link" href="#">&lt;</a></li>
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item"><a class="page-link" href="#">4</a></li>
                    <li class="page-item"><a class="page-link" href="#">5</a></li>
                    <li class="page-item"><a class="page-link" href="#">&gt;</a></li>
                  </ul>
                </nav>
              </div>
            </div> -->

            

          </div>
          <!-- END main-content -->

          <!-- side bar include -->
        	<div th:replace="fragments/side-bar :: side-bar" ></div>
      	<!-- side bar include -->

        </div>
      </div>
    </section>
</div>
</html>

<!--  검색어 highlighting  -->
<script type="text/javascript" th:inline="javascript">
$(function(){
	if(/*[[ ${blogFlag.keyword}]]*/ != null){
		/* <![CDATA[ */       
		$('.word').highlight(/*[[ ${blogFlag.keyword}]]*/);
		/* ]]> */
	}
})
</script>